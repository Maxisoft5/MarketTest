{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport { catchError, of } from \"rxjs\";\nimport { SessionStorageConstanst } from \"src/app/shared/constanst/session-storage-constans\";\nimport { ReceiverOrderCity } from \"src/app/shared/enums/order-reciver-city\";\nimport { SendOrderMethod } from \"src/app/shared/enums/send-order-method\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/products-service\";\nimport * as i2 from \"src/app/shared/services/session-storage-service\";\nimport * as i3 from \"src/app/shared/services/order-service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@nebular/theme\";\nimport * as i7 from \"@angular/forms\";\nconst _c0 = [\"snilsPreview\"];\nconst _c1 = [\"stepper\"];\nfunction OrderComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\");\n  }\n}\nfunction OrderComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\u041F\\u043E\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043E\\u043A\");\n  }\n}\nfunction OrderComponent_div_31_a_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const prop_r18 = ctx.$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r17.getFormattedProperty(prop_r18), \" \");\n  }\n}\nfunction OrderComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"nb-card\")(2, \"nb-card-header\")(3, \"div\", 39)(4, \"div\", 40)(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"i\", 41);\n    i0.ɵɵlistener(\"click\", function OrderComponent_div_31_Template_i_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const product_r16 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.deleteProduct(product_r16.id));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"a\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"nb-card-body\")(12, \"div\", 42);\n    i0.ɵɵtemplate(13, OrderComponent_div_31_a_13_Template, 3, 1, \"a\", 17);\n    i0.ɵɵpipe(14, \"keyvalue\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(15, \"nb-card-footer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r16 = ctx.$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", product_r16.name, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\u0421\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C: \", product_r16.price, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(14, 3, product_r16.properties));\n  }\n}\nfunction OrderComponent_nb_radio_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nb-radio\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r21 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r21.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r21.label, \" \");\n  }\n}\nfunction OrderComponent_nb_select_62_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"nb-select\", 44);\n    i0.ɵɵlistener(\"selectedChange\", function OrderComponent_nb_select_62_Template_nb_select_selectedChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.selectedCity = $event);\n    });\n    i0.ɵɵelementStart(1, \"nb-option\", 45);\n    i0.ɵɵtext(2, \"\\u041C\\u043E\\u0441\\u043A\\u0432\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"nb-option\", 46);\n    i0.ɵɵtext(4, \"\\u0412\\u043E\\u0440\\u043E\\u043D\\u0435\\u0436\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"selected\", ctx_r8.selectedCity);\n  }\n}\nfunction OrderComponent_div_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 47);\n    i0.ɵɵtext(2, \"\\u0424\\u0418\\u041E\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 48);\n    i0.ɵɵelementStart(4, \"label\", 49);\n    i0.ɵɵtext(5, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"nb-form-field\")(7, \"span\", 10);\n    i0.ɵɵtext(8, \"+7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 50);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"label\", 51);\n    i0.ɵɵtext(11, \"\\u0418\\u043D\\u0434\\u0435\\u043A\\u0441\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 52);\n    i0.ɵɵelementStart(13, \"label\", 53);\n    i0.ɵɵtext(14, \"\\u0410\\u0434\\u0440\\u0435\\u0441\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 54);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"status\", (ctx_r9.fio == null ? null : ctx_r9.fio.dirty) ? (ctx_r9.fio == null ? null : ctx_r9.fio.invalid) ? \"danger\" : \"success\" : \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"status\", (ctx_r9.receieverPhone == null ? null : ctx_r9.receieverPhone.dirty) ? (ctx_r9.receieverPhone == null ? null : ctx_r9.receieverPhone.invalid) ? \"danger\" : \"success\" : \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"status\", (ctx_r9.index == null ? null : ctx_r9.index.dirty) ? (ctx_r9.index == null ? null : ctx_r9.index.invalid) ? \"danger\" : \"success\" : \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"status\", (ctx_r9.address == null ? null : ctx_r9.address.dirty) ? (ctx_r9.address == null ? null : ctx_r9.address.invalid) ? \"danger\" : \"success\" : \"\");\n  }\n}\nfunction OrderComponent_div_79_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const prop_r26 = ctx.$implicit;\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r25.getFormattedProperty(prop_r26), \" \");\n  }\n}\nfunction OrderComponent_div_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, OrderComponent_div_79_a_3_Template, 2, 1, \"a\", 17);\n    i0.ɵɵpipe(4, \"keyvalue\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r24 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"Id: \", product_r24.id, \", \\u0418\\u043C\\u044F \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430: \", product_r24.name, \", \\u0426\\u0435\\u043D\\u0430: \", product_r24.price, \", \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 4, product_r24.properties));\n  }\n}\nfunction OrderComponent_div_87_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u0413\\u043E\\u0440\\u043E\\u0434 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438: \", ctx_r11.getSelectedCity(), \" \");\n  }\n}\nfunction OrderComponent_div_88_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u0424\\u0418\\u041E: \", ctx_r12.fio == null ? null : ctx_r12.fio.value, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0442\\u0435\\u043B\\u044F: \", ctx_r12.receieverPhone == null ? null : ctx_r12.receieverPhone.value, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u0418\\u043D\\u0434\\u0435\\u043A\\u0441: \", ctx_r12.index == null ? null : ctx_r12.index.value, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u0410\\u0434\\u0440\\u0435\\u0441: \", ctx_r12.address == null ? null : ctx_r12.address.value, \" \");\n  }\n}\nfunction OrderComponent_p_91_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\", 55);\n    i0.ɵɵtext(1, \"\\u0421\\u043D\\u0438\\u043B\\u0441 \\u043D\\u0435 \\u0431\\u044B\\u043B \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D, \");\n    i0.ɵɵelementStart(2, \"a\", 56);\n    i0.ɵɵlistener(\"click\", function OrderComponent_p_91_Template_a_click_2_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.reloadSnils());\n    });\n    i0.ɵɵtext(3, \"\\u041F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OrderComponent_p_92_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\", 55);\n    i0.ɵɵtext(1, \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043D\\u0435 \\u0431\\u044B\\u043B\\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u044B, \");\n    i0.ɵɵelementStart(2, \"button\", 57);\n    i0.ɵɵlistener(\"click\", function OrderComponent_p_92_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.reloadPersonalData());\n    });\n    i0.ɵɵtext(3, \"\\u041F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OrderComponent_p_93_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\", 55);\n    i0.ɵɵtext(1, \"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E\\u0431 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0435 \\u043D\\u0435 \\u0431\\u044B\\u043B\\u0438 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u044B, \");\n    i0.ɵɵelementStart(2, \"button\", 57);\n    i0.ɵɵlistener(\"click\", function OrderComponent_p_93_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.reloadSendData());\n    });\n    i0.ɵɵtext(3, \"\\u041F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class OrderComponent {\n  get name() {\n    return this.regForm.get('name');\n  }\n  get snils() {\n    return this.regForm.get('snils');\n  }\n  get snilsPhoto() {\n    return this.regForm.get('snilsPhoto');\n  }\n  get phone() {\n    return this.regForm.get('phone');\n  }\n  get fio() {\n    return this.regForm.get('fio');\n  }\n  get receieverPhone() {\n    return this.regForm.get('receieverPhone');\n  }\n  get index() {\n    return this.regForm.get('index');\n  }\n  get address() {\n    return this.regForm.get('address');\n  }\n  get selectedSendOption() {\n    return this.regForm.get('selectedSendOption');\n  }\n  constructor(productsService, sessionStorageService, ordersService, route) {\n    this.productsService = productsService;\n    this.sessionStorageService = sessionStorageService;\n    this.ordersService = ordersService;\n    this.route = route;\n    this.products = [];\n    this.personalDataAllowUse = false;\n    this.allowedFileFormats = [\"image/jpg\", \"image/png\", \"image/jpeg\"];\n    this.options = [{\n      value: SendOrderMethod.SelfReciver,\n      label: 'Самовывоз'\n    }, {\n      value: SendOrderMethod.PostOffice,\n      label: 'Доставка почтой'\n    }];\n    this.selectedCity = \"\";\n    this.uploadedSnilsUrl = \"\";\n    this.orderId = \"\";\n    this.orderUploadProgress = 0;\n    this.uploadingParts = \"\";\n    this.personalDataError = false;\n    this.snilsError = false;\n    this.sendDataError = false;\n    this.snilsLoaded = false;\n    this.persnoalDataLoaded = false;\n    this.sendDataLoaded = false;\n    const phoneValidators = [Validators.pattern('[0-9]{10}'), Validators.required];\n    const namesValidators = [Validators.minLength(3), Validators.maxLength(28), Validators.required];\n    const fioValidators = [Validators.minLength(11), Validators.maxLength(50), Validators.required];\n    const snilsValidators = [Validators.pattern('[0-9]{11}'), Validators.required];\n    const indexValidators = [Validators.required, Validators.pattern('[0-9]{6}')];\n    let paramsRoute = this.route.snapshot.params;\n    this.orderId = paramsRoute['id'];\n    this.regForm = new FormGroup({\n      name: new FormControl(null, [...namesValidators]),\n      phone: new FormControl(null, [...phoneValidators]),\n      snils: new FormControl(null, [...snilsValidators]),\n      snilsPhoto: new FormControl(null, [Validators.required]),\n      fio: new FormControl(null, [...fioValidators]),\n      receieverPhone: new FormControl(null, [...phoneValidators]),\n      index: new FormControl(null, [...indexValidators]),\n      address: new FormControl(null, [Validators.required, Validators.minLength(5), Validators.maxLength(50)]),\n      selectedSendOption: new FormControl(null)\n    });\n  }\n  inImageUpload($event) {\n    this.regForm.get('snilsPhoto')?.setErrors(null);\n    if ($event?.target?.files?.length > 8) {\n      this.regForm.get('snilsPhoto')?.setErrors({\n        maxImagesCount: true\n      });\n      return;\n    }\n    if ($event?.target?.files) {\n      for (const [key, file] of Object.entries($event?.target?.files)) {\n        if (file.size > 1024 * 1024) {\n          this.regForm.get('snilsPhoto')?.setErrors({\n            maxImageSize: true\n          });\n        }\n        if (!this.allowedFileFormats.includes(file.type)) {\n          this.regForm.get('snilsPhoto')?.setErrors({\n            fileFormat: true\n          });\n        }\n      }\n      this.uploadSnils = $event?.target?.files;\n      if (this.uploadSnils && this.snilsPreview) {\n        let url = URL.createObjectURL(this.uploadSnils[0]);\n        this.uploadedSnilsUrl = url;\n        this.snilsPreview['nativeElement'].setAttribute(\"src\", url);\n      }\n    }\n  }\n  getFormattedProperty(prop) {\n    return this.productsService.getFormattedProperty(prop);\n  }\n  isSelectedSelfReciver() {\n    return this.selectedSendOption?.value == SendOrderMethod.SelfReciver;\n  }\n  isSelectedPostOffice() {\n    return this.selectedSendOption?.value == SendOrderMethod.PostOffice;\n  }\n  isDisabledSenderSubmitStep() {\n    if (!this.selectedSendOption || !this.selectedSendOption.value === undefined) {\n      return true;\n    }\n    if (this.selectedSendOption.value == SendOrderMethod.SelfReciver) {\n      return this.selectedCity == undefined;\n    }\n    let inValid = this.fio?.invalid || this.receieverPhone?.invalid || this.index?.invalid || this.address?.invalid;\n    return inValid;\n  }\n  loadProducts() {\n    let products = this.sessionStorageService.getItemByKey(SessionStorageConstanst.Busket);\n    this.products = products;\n  }\n  getSelectedSendOptionLabel() {\n    if (this.selectedSendOption?.value == SendOrderMethod.PostOffice) {\n      return \"Доставка почтой\";\n    }\n    return \"Самовывоз\";\n  }\n  getSelectedCity() {\n    if (+this.selectedCity == ReceiverOrderCity.Moscow) {\n      return \"Москва\";\n    }\n    return \"Воронеж\";\n  }\n  deleteProduct(id) {\n    if (id) {\n      this.products = this.products.filter(x => x.id != id);\n      this.sessionStorageService.setItemInJSON(SessionStorageConstanst.Busket, this.products);\n      this.productsService.changeBucket();\n    } else {\n      console.warn(\"product id was null during deleting from confirm bucket\");\n    }\n  }\n  sendOrder() {\n    if (!this.orderId) {\n      console.warn(\"orderId was not found in route\");\n      return;\n    }\n    let savePersonal = {\n      name: this.name?.value,\n      phone: this.phone?.value,\n      orderId: this.orderId\n    };\n    this.uploadingParts = \"Личные данные, Снилс, Данные об отправке\";\n    if (this.uploadSnils && this.uploadSnils[0]) {\n      let saveSnils = {\n        snils: this.snils?.value,\n        snilsPhoto: this.uploadSnils[0],\n        orderId: this.orderId\n      };\n      this.ordersService.saveSnilsData(saveSnils).pipe(catchError(err => of(this.snilsError = true))).subscribe(result => {\n        if (!this.snilsError) {\n          this.incrementUploadProgress();\n          this.snilsLoaded = true;\n          this.uploadingParts = \"\";\n          if (!this.persnoalDataLoaded && this.sendDataLoaded) {\n            this.uploadingParts += \"Личные данные\";\n          }\n          if (!this.sendDataLoaded && this.persnoalDataLoaded) {\n            this.uploadingParts += \"Данные об отправке\";\n          }\n          if (!this.sendDataLoaded && !this.persnoalDataLoaded) {\n            this.uploadingParts += \"Личные данные, Данные об отправке\";\n          }\n          if (this.persnoalDataLoaded && this.sendDataLoaded) {\n            if (this.stepper) {\n              this.stepper.next();\n            }\n          }\n        }\n      });\n    }\n    let saveSendData = {\n      receiverPhone: this.receieverPhone?.value,\n      FIO: this.fio?.value,\n      sendMethod: this.selectedSendOption?.value,\n      receiverOrderCity: +this.selectedCity,\n      index: this.index?.value,\n      address: this.address?.value,\n      orderId: this.orderId\n    };\n    this.ordersService.savePersonalData(savePersonal).pipe(catchError(err => of(this.personalDataError = true))).subscribe(result => {\n      if (!this.personalDataError) {\n        this.incrementUploadProgress();\n        this.uploadingParts = \"\";\n        this.persnoalDataLoaded = true;\n        if (!this.snilsLoaded && this.sendDataLoaded) {\n          this.uploadingParts += \"Снилс\";\n        }\n        if (!this.sendDataLoaded && this.snilsLoaded) {\n          this.uploadingParts += \"Данные об отправке\";\n        }\n        if (!this.sendDataLoaded && !this.snilsLoaded) {\n          this.uploadingParts += \"Снилс, Данные об отправке\";\n        }\n        if (this.snilsLoaded && this.sendDataLoaded) {\n          if (this.stepper) {\n            this.stepper.next();\n          }\n        }\n      }\n    });\n    this.ordersService.saveSendData(saveSendData).pipe(catchError(err => of(this.sendDataError = true))).subscribe(result => {\n      if (!this.sendDataError) {\n        this.incrementUploadProgress();\n        this.uploadingParts = \"\";\n        this.sendDataLoaded = true;\n        if (!this.persnoalDataLoaded && this.snilsLoaded) {\n          this.uploadingParts += \"Личные данные\";\n        }\n        if (this.persnoalDataLoaded && !this.snilsLoaded) {\n          this.uploadingParts += \"Снилс\";\n        }\n        if (!this.snilsLoaded && !this.persnoalDataLoaded) {\n          this.uploadingParts += \"Личные данные, снилс\";\n        }\n        if (this.snilsLoaded && this.persnoalDataLoaded) {\n          if (this.stepper) {\n            this.stepper.next();\n          }\n        }\n      }\n    });\n  }\n  incrementUploadProgress() {\n    if (this.orderUploadProgress == 66.6) {\n      this.orderUploadProgress = 100;\n    } else {\n      this.orderUploadProgress += 33.3;\n    }\n  }\n  reloadSnils() {\n    if (this.uploadSnils && this.uploadSnils[0] && this.orderId) {\n      let saveSnils = {\n        snils: this.snils?.value,\n        snilsPhoto: this.uploadSnils[0],\n        orderId: this.orderId\n      };\n      this.snilsError = false;\n      this.ordersService.saveSnilsData(saveSnils).pipe(catchError(err => of(this.snilsError = true))).subscribe(result => {\n        if (!this.snilsError) {\n          this.incrementUploadProgress();\n          this.snilsLoaded = true;\n          this.uploadingParts = \"\";\n          if (!this.persnoalDataLoaded && this.sendDataLoaded) {\n            this.uploadingParts += \"Личные данные\";\n          }\n          if (!this.sendDataLoaded && this.persnoalDataLoaded) {\n            this.uploadingParts += \"Данные об отправке\";\n          }\n          if (!this.sendDataLoaded && !this.persnoalDataLoaded) {\n            this.uploadingParts += \"Личные данные, Данные об отправке\";\n          }\n          if (this.persnoalDataLoaded && this.sendDataLoaded) {\n            if (this.stepper) {\n              this.stepper.next();\n            }\n          }\n        }\n      });\n    }\n  }\n  reloadPersonalData() {\n    if (!this.orderId) {\n      return;\n    }\n    this.personalDataError = false;\n    let savePersonal = {\n      name: this.name?.value,\n      phone: this.phone?.value,\n      orderId: this.orderId\n    };\n    this.ordersService.savePersonalData(savePersonal).pipe(catchError(err => of(this.personalDataError = true))).subscribe(result => {\n      if (!this.personalDataError) {\n        this.incrementUploadProgress();\n        this.uploadingParts = \"\";\n        this.persnoalDataLoaded = true;\n        if (!this.snilsLoaded && this.sendDataLoaded) {\n          this.uploadingParts += \"Снилс\";\n        }\n        if (!this.sendDataLoaded && this.snilsLoaded) {\n          this.uploadingParts += \"Данные об отправке\";\n        }\n        if (!this.sendDataLoaded && !this.snilsLoaded) {\n          this.uploadingParts += \"Снилс, Данные об отправке\";\n        }\n        if (this.snilsLoaded && this.sendDataLoaded) {\n          if (this.stepper) {\n            this.stepper.next();\n          }\n        }\n      }\n    });\n  }\n  reloadSendData() {\n    if (!this.orderId) {\n      return;\n    }\n    this.sendDataError = false;\n    let saveSendData = {\n      receiverPhone: this.receieverPhone?.value,\n      FIO: this.fio?.value,\n      sendMethod: this.selectedSendOption?.value,\n      receiverOrderCity: +this.selectedCity,\n      index: this.index?.value,\n      address: this.address?.value,\n      orderId: this.orderId\n    };\n    this.ordersService.saveSendData(saveSendData).pipe(catchError(err => of(this.sendDataError = true))).subscribe(result => {\n      if (!this.sendDataError) {\n        this.incrementUploadProgress();\n        this.uploadingParts = \"\";\n        this.sendDataLoaded = true;\n        if (!this.persnoalDataLoaded && this.snilsLoaded) {\n          this.uploadingParts += \"Личные данные\";\n        }\n        if (this.persnoalDataLoaded && !this.snilsLoaded) {\n          this.uploadingParts += \"Снилс\";\n        }\n        if (!this.snilsLoaded && !this.persnoalDataLoaded) {\n          this.uploadingParts += \"Личные данные, снилс\";\n        }\n        if (this.snilsLoaded && this.persnoalDataLoaded) {\n          if (this.stepper) {\n            this.stepper.next();\n          }\n        }\n      }\n    });\n  }\n}\nOrderComponent.ɵfac = function OrderComponent_Factory(t) {\n  return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.ProductsService), i0.ɵɵdirectiveInject(i2.SessionStorageService), i0.ɵɵdirectiveInject(i3.OrdersService), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n};\nOrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OrderComponent,\n  selectors: [[\"app-order\"]],\n  viewQuery: function OrderComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.snilsPreview = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stepper = _t.first);\n    }\n  },\n  decls: 108,\n  vars: 29,\n  consts: [[2, \"padding\", \"50px\"], [3, \"formGroup\"], [\"disableStepNavigation\", \"true\", \"orientation\", \"horizontal\"], [\"stepper\", \"\"], [\"label\", \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"], [\"labelOne\", \"\"], [1, \"input-form\"], [\"for\", \"name\"], [\"formControlName\", \"name\", \"type\", \"text\", \"nbInput\", \"\", 3, \"status\"], [\"for\", \"phone\"], [\"nbPrefix\", \"\", 2, \"margin-top\", \"-1px\"], [\"formControlName\", \"phone\", \"type\", \"text\", \"nbInput\", \"\", 3, \"status\"], [3, \"checkedChange\"], [2, \"display\", \"flex\", \"flex-direction\", \"row\"], [\"nbButton\", \"\", \"nbStepperNext\", \"\", 2, \"margin-right\", \"10px\", 3, \"disabled\", \"click\"], [\"label\", \"\\u041F\\u043E\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043E\\u043A\"], [\"labelTwo\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"nbButton\", \"\", \"nbStepperPrevious\", \"\", 2, \"margin-right\", \"10px\"], [\"nbButton\", \"\", \"nbStepperNext\", \"\", 3, \"disabled\"], [\"label\", \"\\u0421\\u043D\\u0438\\u043B\\u0441\"], [\"formControlName\", \"snils\", \"type\", \"text\", \"nbInput\", \"\", 3, \"status\"], [\"for\", \"snilsPhoto\"], [\"type\", \"file\", \"formControlName\", \"snilsPhoto\", 3, \"change\"], [\"width\", \"200\", \"height\", \"150\", \"src\", \"#\", \"alt\", \"\\u0441\\u043D\\u0438\\u043B\\u0441\"], [\"snilsPreview\", \"\"], [\"nbButton\", \"\", \"nbStepperNext\", \"\", 2, \"margin-right\", \"10px\", 3, \"disabled\"], [\"label\", \"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\"], [\"formControlName\", \"selectedSendOption\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\", 3, \"selected\", \"selectedChange\", 4, \"ngIf\"], [\"class\", \"input-form\", 4, \"ngIf\"], [\"label\", \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0430\"], [\"width\", \"200\", \"height\", \"150\", \"alt\", \"\\u0441\\u043D\\u0438\\u043B\\u0441\", 3, \"src\"], [4, \"ngIf\"], [\"style\", \"color:red\", 4, \"ngIf\"], [\"status\", \"primary\", 3, \"displayValue\", \"value\"], [\"nbButton\", \"\", 2, \"margin-right\", \"10px\", 3, \"disabled\", \"click\"], [\"label\", \"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\"], [1, \"card-header\"], [2, \"display\", \"flex\", \"flex-direction\", \"row\", \"justify-content\", \"space-between\"], [1, \"pi\", \"pi-times\", 3, \"click\"], [1, \"card-body\"], [3, \"value\"], [\"placeholder\", \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0433\\u043E\\u0440\\u043E\\u0434\", 3, \"selected\", \"selectedChange\"], [\"value\", \"0\"], [\"value\", \"1\"], [\"for\", \"fio\"], [\"formControlName\", \"fio\", \"type\", \"text\", \"nbInput\", \"\", 3, \"status\"], [\"for\", \"receieverPhone\"], [\"formControlName\", \"receieverPhone\", \"type\", \"text\", \"nbInput\", \"\", 3, \"status\"], [\"for\", \"index\"], [\"formControlName\", \"index\", \"type\", \"text\", \"nbInput\", \"\", 3, \"status\"], [\"for\", \"address\"], [\"formControlName\", \"address\", \"type\", \"text\", \"nbInput\", \"\", 3, \"status\"], [2, \"color\", \"red\"], [3, \"click\"], [\"nbButton\", \"\", 3, \"click\"]],\n  template: function OrderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"nb-card\")(3, \"nb-card-body\")(4, \"nb-stepper\", 2, 3)(6, \"nb-step\", 4);\n      i0.ɵɵtemplate(7, OrderComponent_ng_template_7_Template, 1, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(9, \"h4\");\n      i0.ɵɵtext(10, \"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u0435 \\u043B\\u0438\\u0447\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 #1\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 6)(12, \"label\", 7);\n      i0.ɵɵtext(13, \"\\u0418\\u043C\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"input\", 8);\n      i0.ɵɵelementStart(15, \"label\", 9);\n      i0.ɵɵtext(16, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"nb-form-field\")(18, \"span\", 10);\n      i0.ɵɵtext(19, \"+7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"nb-checkbox\", 12);\n      i0.ɵɵlistener(\"checkedChange\", function OrderComponent_Template_nb_checkbox_checkedChange_21_listener() {\n        return ctx.personalDataAllowUse = !ctx.personalDataAllowUse;\n      });\n      i0.ɵɵtext(22, \"\\u0421\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 13)(24, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function OrderComponent_Template_button_click_24_listener() {\n        return ctx.loadProducts();\n      });\n      i0.ɵɵtext(25, \"\\u0414\\u0430\\u043B\\u044C\\u0448\\u0435\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(26, \"nb-step\", 15);\n      i0.ɵɵtemplate(27, OrderComponent_ng_template_27_Template, 1, 0, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementStart(29, \"h4\");\n      i0.ɵɵtext(30, \"\\u041F\\u043E\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043E\\u043A #2\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(31, OrderComponent_div_31_Template, 16, 5, \"div\", 17);\n      i0.ɵɵelementStart(32, \"button\", 18);\n      i0.ɵɵtext(33, \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"button\", 19);\n      i0.ɵɵtext(35, \"\\u0414\\u0430\\u043B\\u044C\\u0448\\u0435\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"nb-step\", 20)(37, \"h4\");\n      i0.ɵɵtext(38, \"\\u0421\\u043D\\u0438\\u043B\\u0441 #3\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"div\", 6)(40, \"label\", 7);\n      i0.ɵɵtext(41, \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0421\\u043D\\u0438\\u043B\\u0441\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(42, \"input\", 21);\n      i0.ɵɵelementStart(43, \"label\", 22);\n      i0.ɵɵtext(44, \"\\u0424\\u043E\\u0442\\u043E \\u0441\\u043D\\u0438\\u043B\\u0441\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"input\", 23);\n      i0.ɵɵlistener(\"change\", function OrderComponent_Template_input_change_45_listener($event) {\n        return ctx.inImageUpload($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(46, \"img\", 24, 25);\n      i0.ɵɵelementStart(48, \"div\", 13)(49, \"button\", 18);\n      i0.ɵɵtext(50, \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"button\", 26);\n      i0.ɵɵtext(52, \"\\u0414\\u0430\\u043B\\u044C\\u0448\\u0435\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(53, \"nb-step\", 27)(54, \"h4\");\n      i0.ɵɵtext(55, \"\\u0412\\u044B\\u0431\\u043E\\u0440 \\u0441\\u043F\\u043E\\u0441\\u043E\\u0431\\u0430 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438 #4\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(56, \"nb-card\")(57, \"nb-card-header\");\n      i0.ɵɵtext(58);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(59, \"nb-card-body\")(60, \"nb-radio-group\", 28);\n      i0.ɵɵtemplate(61, OrderComponent_nb_radio_61_Template, 2, 2, \"nb-radio\", 29);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(62, OrderComponent_nb_select_62_Template, 5, 1, \"nb-select\", 30);\n      i0.ɵɵtemplate(63, OrderComponent_div_63_Template, 16, 4, \"div\", 31);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(64, \"div\", 13)(65, \"button\", 18);\n      i0.ɵɵtext(66, \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"button\", 26);\n      i0.ɵɵtext(68, \"\\u0414\\u0430\\u043B\\u044C\\u0448\\u0435\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(69, \"nb-step\", 32)(70, \"h4\");\n      i0.ɵɵtext(71, \"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043A\\u0438 #5\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"div\", 6)(73, \"p\");\n      i0.ɵɵtext(74);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(75, \"p\");\n      i0.ɵɵtext(76);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(77, \"p\");\n      i0.ɵɵtext(78, \"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u044B: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(79, OrderComponent_div_79_Template, 5, 6, \"div\", 17);\n      i0.ɵɵelementStart(80, \"p\");\n      i0.ɵɵtext(81);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(82, \"p\");\n      i0.ɵɵtext(83, \" \\u0424\\u043E\\u0442\\u043E \\u0441\\u043D\\u0438\\u043B\\u0441\\u0430: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(84, \"img\", 33);\n      i0.ɵɵelementStart(85, \"p\");\n      i0.ɵɵtext(86);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(87, OrderComponent_div_87_Template, 3, 1, \"div\", 34);\n      i0.ɵɵtemplate(88, OrderComponent_div_88_Template, 9, 4, \"div\", 34);\n      i0.ɵɵelementStart(89, \"p\");\n      i0.ɵɵtext(90);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(91, OrderComponent_p_91_Template, 4, 0, \"p\", 35);\n      i0.ɵɵtemplate(92, OrderComponent_p_92_Template, 4, 0, \"p\", 35);\n      i0.ɵɵtemplate(93, OrderComponent_p_93_Template, 4, 0, \"p\", 35);\n      i0.ɵɵelement(94, \"nb-progress-bar\", 36);\n      i0.ɵɵelementStart(95, \"div\", 13)(96, \"button\", 18);\n      i0.ɵɵtext(97, \"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(98, \"button\", 37);\n      i0.ɵɵlistener(\"click\", function OrderComponent_Template_button_click_98_listener() {\n        return ctx.sendOrder();\n      });\n      i0.ɵɵtext(99, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(100, \"nb-step\", 38)(101, \"h4\");\n      i0.ɵɵtext(102, \"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(103, \"div\", 6)(104, \"label\");\n      i0.ɵɵtext(105, \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(106, \"label\");\n      i0.ɵɵtext(107);\n      i0.ɵɵelementEnd()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.regForm);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"status\", (ctx.name == null ? null : ctx.name.dirty) ? (ctx.name == null ? null : ctx.name.invalid) ? \"danger\" : \"success\" : \"\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"status\", (ctx.phone == null ? null : ctx.phone.dirty) ? (ctx.phone == null ? null : ctx.phone.invalid) ? \"danger\" : \"success\" : \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"disabled\", ctx.name && ctx.name.invalid || ctx.phone && ctx.phone.invalid || ctx.personalDataAllowUse == false);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.products.length == 0);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"status\", (ctx.snils == null ? null : ctx.snils.dirty) ? (ctx.snils == null ? null : ctx.snils.invalid) ? \"danger\" : \"success\" : \"\");\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"disabled\", ctx.snils && ctx.snils.invalid || ctx.snilsPhoto && ctx.snilsPhoto.invalid || !ctx.uploadSnils);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430 \", (ctx.selectedSendOption == null ? null : ctx.selectedSendOption.value) == undefined ? \"\" : ctx.getSelectedSendOptionLabel(), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.options);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSelectedSelfReciver());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSelectedPostOffice());\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"disabled\", ctx.isDisabledSenderSubmitStep());\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"\\u0418\\u043C\\u044F: \", ctx.name == null ? null : ctx.name.value, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D: \", ctx.phone == null ? null : ctx.phone.value, \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \\u041D\\u043E\\u043C\\u0435\\u0440 \\u0441\\u043D\\u0438\\u043B\\u0441\\u0430: \", ctx.snils == null ? null : ctx.snils.value, \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.uploadedSnilsUrl, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \\u0421\\u043F\\u043E\\u0441\\u043E\\u0431 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438: \", ctx.getSelectedSendOptionLabel(), \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSelectedSelfReciver());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSelectedPostOffice());\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430: \", ctx.uploadingParts, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.snilsError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.personalDataError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.sendDataError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"displayValue\", true)(\"value\", ctx.orderUploadProgress);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"disabled\", ctx.sendDataError || ctx.personalDataError || ctx.snilsError);\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate(ctx.orderId);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.NbStepperComponent, i6.NbStepComponent, i6.NbStepperNextDirective, i6.NbStepperPreviousDirective, i6.NbCardComponent, i6.NbCardBodyComponent, i6.NbCardFooterComponent, i6.NbCardHeaderComponent, i6.NbButtonComponent, i7.ɵNgNoValidate, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.FormGroupDirective, i7.FormControlName, i6.NbInputDirective, i6.NbFormFieldComponent, i6.NbPrefixDirective, i6.NbCheckboxComponent, i6.NbRadioComponent, i6.NbRadioGroupComponent, i6.NbSelectComponent, i6.NbOptionComponent, i6.NbProgressBarComponent, i5.KeyValuePipe],\n  styles: [\".input-form[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n}\\r\\n\\r\\n.input-form[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\\r\\n    margin-top: 5px;\\r\\n    -webkit-user-select: none;\\r\\n            user-select: none; \\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9vcmRlci9vcmRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxlQUFlO0lBQ2YseUJBQWlCO1lBQWpCLGlCQUFpQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4uaW5wdXQtZm9ybSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG5cclxuLmlucHV0LWZvcm0gPiAqIHtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICAgIHVzZXItc2VsZWN0OiBub25lOyBcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","catchError","of","SessionStorageConstanst","ReceiverOrderCity","SendOrderMethod","i0","OrderComponent","name","regForm","get","snils","snilsPhoto","phone","fio","receieverPhone","index","address","selectedSendOption","constructor","productsService","sessionStorageService","ordersService","route","value","SelfReciver","label","PostOffice","phoneValidators","pattern","required","namesValidators","minLength","maxLength","fioValidators","snilsValidators","indexValidators","paramsRoute","snapshot","params","orderId","inImageUpload","$event","setErrors","target","files","length","maxImagesCount","key","file","Object","entries","size","maxImageSize","allowedFileFormats","includes","type","fileFormat","uploadSnils","snilsPreview","url","URL","createObjectURL","uploadedSnilsUrl","setAttribute","getFormattedProperty","prop","isSelectedSelfReciver","isSelectedPostOffice","isDisabledSenderSubmitStep","undefined","selectedCity","inValid","invalid","loadProducts","products","getItemByKey","Busket","getSelectedSendOptionLabel","getSelectedCity","Moscow","deleteProduct","id","filter","x","setItemInJSON","changeBucket","console","warn","sendOrder","savePersonal","uploadingParts","saveSnils","saveSnilsData","pipe","err","snilsError","subscribe","result","incrementUploadProgress","snilsLoaded","persnoalDataLoaded","sendDataLoaded","stepper","next","saveSendData","receiverPhone","FIO","sendMethod","receiverOrderCity","savePersonalData","personalDataError","sendDataError","orderUploadProgress","reloadSnils","reloadPersonalData","reloadSendData","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\Maksym\\Documents\\GitHub\\backend\\MarketTest\\Test\\ClientApp\\src\\app\\components\\order\\order.component.ts","C:\\Users\\Maksym\\Documents\\GitHub\\backend\\MarketTest\\Test\\ClientApp\\src\\app\\components\\order\\order.component.html"],"sourcesContent":["import { Component, ElementRef, ViewChild } from \"@angular/core\";\r\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { NbStepperComponent } from \"@nebular/theme\";\r\nimport { catchError, of } from \"rxjs\";\r\nimport { SessionStorageConstanst } from \"src/app/shared/constanst/session-storage-constans\";\r\nimport { ReceiverOrderCity } from \"src/app/shared/enums/order-reciver-city\";\r\nimport { SendOrderMethod } from \"src/app/shared/enums/send-order-method\";\r\nimport { PersonalData } from \"src/app/shared/models/personal-data\";\r\nimport { Product } from \"src/app/shared/models/product\";\r\nimport { SendDetils } from \"src/app/shared/models/send-details\";\r\nimport { SnilsDetails } from \"src/app/shared/models/snils-details\";\r\nimport { OrdersService } from \"src/app/shared/services/order-service\";\r\nimport { ProductsService } from \"src/app/shared/services/products-service\";\r\nimport { SessionStorageService } from \"src/app/shared/services/session-storage-service\";\r\n\r\n\r\n@Component({\r\n    selector: 'app-order',\r\n    templateUrl: './order.component.html',\r\n    styleUrls: ['./order.component.css']\r\n  })\r\n\r\n  export class OrderComponent {\r\n\r\n    regForm!: FormGroup;\r\n    products: Product[] = [];\r\n    personalDataAllowUse = false;\r\n    allowedFileFormats = [\"image/jpg\", \"image/png\", \"image/jpeg\"];\r\n    uploadSnils: FileList | undefined;\r\n    @ViewChild('snilsPreview') snilsPreview: ElementRef | undefined;\r\n    options = [\r\n        { value: SendOrderMethod.SelfReciver, label: 'Самовывоз' },\r\n        { value: SendOrderMethod.PostOffice, label: 'Доставка почтой' }, \r\n    ];\r\n    selectedCity:  string = \"\";\r\n    uploadedSnilsUrl: string = \"\";\r\n    orderId: string | null = \"\";\r\n    orderUploadProgress = 0;\r\n    uploadingParts = \"\";\r\n    @ViewChild('stepper') stepper: NbStepperComponent | undefined;\r\n    personalDataError = false;\r\n    snilsError = false;\r\n    sendDataError = false;\r\n    snilsLoaded = false;\r\n    persnoalDataLoaded = false;\r\n    sendDataLoaded = false;\r\n\r\n    get name() {\r\n        return this.regForm.get('name');\r\n    }\r\n\r\n    get snils() {\r\n        return this.regForm.get('snils');\r\n    }\r\n\r\n    get snilsPhoto() {\r\n        return this.regForm.get('snilsPhoto');\r\n    }\r\n\r\n    get phone() {\r\n        return this.regForm.get('phone');\r\n    }\r\n\r\n    get fio() {\r\n        return this.regForm.get('fio');\r\n    }\r\n\r\n    get receieverPhone() {\r\n        return this.regForm.get('receieverPhone');\r\n    }\r\n\r\n    get index() {\r\n        return this.regForm.get('index');\r\n    }\r\n\r\n    get address() {\r\n        return this.regForm.get('address');\r\n    }\r\n\r\n    get selectedSendOption() {\r\n        return this.regForm.get('selectedSendOption');\r\n    }\r\n\r\n\r\n    constructor(private productsService: ProductsService,\r\n        private sessionStorageService: SessionStorageService,\r\n        private ordersService: OrdersService,\r\n        private route: ActivatedRoute) {\r\n        const phoneValidators = [Validators.pattern('[0-9]{10}'), Validators.required];\r\n        const namesValidators = [Validators.minLength(3), Validators.maxLength(28), Validators.required];\r\n        const fioValidators = [Validators.minLength(11), Validators.maxLength(50), Validators.required];\r\n        const snilsValidators = [Validators.pattern('[0-9]{11}'), Validators.required];\r\n        const indexValidators = [Validators.required, Validators.pattern('[0-9]{6}')];\r\n\r\n        let paramsRoute = this.route.snapshot.params;\r\n        this.orderId = paramsRoute['id'];\r\n\r\n\r\n        this.regForm = new FormGroup({\r\n            name: new FormControl(null, [...namesValidators]),\r\n            phone: new FormControl(null, [...phoneValidators]),\r\n            snils: new FormControl(null, [...snilsValidators]),\r\n            snilsPhoto: new FormControl(null, [Validators.required]),\r\n            fio: new FormControl(null, [...fioValidators]),\r\n            receieverPhone: new FormControl(null, [...phoneValidators]),\r\n            index: new FormControl(null, [...indexValidators]),\r\n            address: new FormControl(null, [Validators.required, Validators.minLength(5), Validators.maxLength(50)]),\r\n            selectedSendOption: new FormControl(null)\r\n        });\r\n    }\r\n\r\n    inImageUpload($event:any) {\r\n        this.regForm.get('snilsPhoto')?.setErrors(null);\r\n        if ($event?.target?.files?.length > 8) {\r\n            this.regForm.get('snilsPhoto')?.setErrors({ maxImagesCount: true });\r\n            return;\r\n        }\r\n        if ($event?.target?.files) {\r\n            for (const [key, file] of Object.entries($event?.target?.files as FileList)) {\r\n                if (file.size > (1024 * 1024)) {\r\n                    this.regForm.get('snilsPhoto')?.setErrors({ maxImageSize: true });\r\n                }\r\n                if ( !this.allowedFileFormats.includes(file.type)) {\r\n                    this.regForm.get('snilsPhoto')?.setErrors({ fileFormat: true });\r\n                }\r\n            }\r\n            this.uploadSnils = $event?.target?.files;\r\n            if (this.uploadSnils && this.snilsPreview) {\r\n                let url = URL.createObjectURL(this.uploadSnils[0] as Blob);\r\n                this.uploadedSnilsUrl = url;\r\n                this.snilsPreview['nativeElement'].setAttribute(\"src\", url);\r\n            }\r\n        }\r\n    }\r\n\r\n    getFormattedProperty(prop:any) {\r\n        return this.productsService.getFormattedProperty(prop);\r\n    }\r\n\r\n    isSelectedSelfReciver() {\r\n        return this.selectedSendOption?.value == SendOrderMethod.SelfReciver;\r\n    }\r\n\r\n    isSelectedPostOffice() {\r\n        return this.selectedSendOption?.value == SendOrderMethod.PostOffice;\r\n    }\r\n\r\n    isDisabledSenderSubmitStep() {\r\n        if (!this.selectedSendOption || !this.selectedSendOption.value === undefined) {\r\n            return true;\r\n        }\r\n        if (this.selectedSendOption.value == SendOrderMethod.SelfReciver) {\r\n            return this.selectedCity == undefined;\r\n        } \r\n        let inValid = this.fio?.invalid || this.receieverPhone?.invalid || this.index?.invalid || this.address?.invalid;\r\n        return inValid;\r\n    }\r\n\r\n    loadProducts() {\r\n        let products:Product[] = this.sessionStorageService.getItemByKey(SessionStorageConstanst.Busket);\r\n        this.products = products;\r\n    }\r\n\r\n    getSelectedSendOptionLabel() {\r\n        if (this.selectedSendOption?.value == SendOrderMethod.PostOffice) {\r\n            return \"Доставка почтой\";\r\n        }\r\n        return \"Самовывоз\";\r\n    }\r\n\r\n    getSelectedCity() {\r\n        if (+this.selectedCity == ReceiverOrderCity.Moscow) {\r\n            return \"Москва\";\r\n        }\r\n        return \"Воронеж\";\r\n    }\r\n\r\n    deleteProduct(id: number | undefined) {\r\n        if (id) {\r\n            this.products = this.products.filter(x => x.id != id);\r\n            this.sessionStorageService.setItemInJSON(SessionStorageConstanst.Busket, this.products);\r\n            this.productsService.changeBucket();\r\n        } else {\r\n            console.warn(\"product id was null during deleting from confirm bucket\");\r\n        }\r\n    }\r\n\r\n    sendOrder() {\r\n        if (!this.orderId) {\r\n            console.warn(\"orderId was not found in route\");\r\n            return;\r\n        }\r\n        let savePersonal: PersonalData = {\r\n            name: this.name?.value,\r\n            phone: this.phone?.value,\r\n            orderId: this.orderId\r\n        };\r\n        this.uploadingParts = \"Личные данные, Снилс, Данные об отправке\";\r\n  \r\n        if (this.uploadSnils && this.uploadSnils[0]) {\r\n            let saveSnils: SnilsDetails = {\r\n                snils: this.snils?.value,\r\n                snilsPhoto: this.uploadSnils[0],\r\n                orderId: this.orderId\r\n            };\r\n            this.ordersService.saveSnilsData(saveSnils).pipe(\r\n                catchError(err => of(this.snilsError = true)  )\r\n            ).subscribe((result) => {\r\n                if (!this.snilsError) {\r\n                    this.incrementUploadProgress();\r\n                    this.snilsLoaded = true;\r\n                    this.uploadingParts = \"\";\r\n                    if (!this.persnoalDataLoaded && this.sendDataLoaded) {\r\n                        this.uploadingParts += \"Личные данные\";\r\n                    }\r\n                    if (!this.sendDataLoaded && this.persnoalDataLoaded) {\r\n                        this.uploadingParts += \"Данные об отправке\";\r\n                    }\r\n                    if (!this.sendDataLoaded && !this.persnoalDataLoaded) {\r\n                        this.uploadingParts += \"Личные данные, Данные об отправке\";\r\n                    }\r\n                    if (this.persnoalDataLoaded && this.sendDataLoaded) {\r\n                        if (this.stepper) {\r\n                            this.stepper.next();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        let saveSendData: SendDetils = {\r\n            receiverPhone: this.receieverPhone?.value,\r\n            FIO: this.fio?.value,\r\n            sendMethod: this.selectedSendOption?.value,\r\n            receiverOrderCity: +this.selectedCity,\r\n            index: this.index?.value,\r\n            address: this.address?.value,\r\n            orderId: this.orderId\r\n        };\r\n        this.ordersService.savePersonalData(savePersonal).pipe( catchError(err => of(this.personalDataError = true)  ))\r\n            .subscribe((result) => {\r\n            if (!this.personalDataError) {\r\n                this.incrementUploadProgress();\r\n                this.uploadingParts = \"\";\r\n                this.persnoalDataLoaded = true;\r\n                if (!this.snilsLoaded && this.sendDataLoaded) {\r\n                    this.uploadingParts += \"Снилс\";\r\n                }\r\n                if (!this.sendDataLoaded && this.snilsLoaded) {\r\n                    this.uploadingParts += \"Данные об отправке\";\r\n                }\r\n                if (!this.sendDataLoaded && !this.snilsLoaded) {\r\n                    this.uploadingParts += \"Снилс, Данные об отправке\";\r\n                }\r\n                if (this.snilsLoaded && this.sendDataLoaded) {\r\n                    if (this.stepper) {\r\n                        this.stepper.next();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.ordersService.saveSendData(saveSendData)\r\n        .pipe( catchError(err => of(this.sendDataError = true)  ))\r\n        .subscribe((result) => {\r\n            if (!this.sendDataError) {\r\n                this.incrementUploadProgress();\r\n                this.uploadingParts = \"\";\r\n                this.sendDataLoaded = true;\r\n                if (!this.persnoalDataLoaded && this.snilsLoaded) {\r\n                    this.uploadingParts += \"Личные данные\";\r\n                }\r\n                if (this.persnoalDataLoaded && !this.snilsLoaded) {\r\n                    this.uploadingParts += \"Снилс\";\r\n                }\r\n                if (!this.snilsLoaded && !this.persnoalDataLoaded) {\r\n                    this.uploadingParts += \"Личные данные, снилс\";\r\n                }\r\n                if (this.snilsLoaded && this.persnoalDataLoaded) {\r\n                    if (this.stepper) {\r\n                        this.stepper.next();\r\n                    }\r\n                }\r\n            }\r\n        }); \r\n    }\r\n\r\n    incrementUploadProgress() {\r\n        if (this.orderUploadProgress == 66.6) {\r\n            this.orderUploadProgress = 100;\r\n        } else {\r\n            this.orderUploadProgress += 33.3;\r\n        }\r\n    }\r\n\r\n    reloadSnils() {\r\n        if (this.uploadSnils && this.uploadSnils[0] && this.orderId) {\r\n            let saveSnils: SnilsDetails = {\r\n                snils: this.snils?.value,\r\n                snilsPhoto: this.uploadSnils[0],\r\n                orderId: this.orderId\r\n            };\r\n            this.snilsError = false;\r\n            this.ordersService.saveSnilsData(saveSnils).pipe(\r\n                catchError(err => of(this.snilsError = true)  )\r\n            ).subscribe((result) => {\r\n                if (!this.snilsError) {\r\n                    this.incrementUploadProgress();\r\n                    this.snilsLoaded = true;\r\n                    this.uploadingParts = \"\";\r\n                    if (!this.persnoalDataLoaded && this.sendDataLoaded) {\r\n                        this.uploadingParts += \"Личные данные\";\r\n                    }\r\n                    if (!this.sendDataLoaded && this.persnoalDataLoaded) {\r\n                        this.uploadingParts += \"Данные об отправке\";\r\n                    }\r\n                    if (!this.sendDataLoaded && !this.persnoalDataLoaded) {\r\n                        this.uploadingParts += \"Личные данные, Данные об отправке\";\r\n                    }\r\n                    if (this.persnoalDataLoaded && this.sendDataLoaded) {\r\n                        if (this.stepper) {\r\n                            this.stepper.next();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    reloadPersonalData() {\r\n        if (!this.orderId) {\r\n            return;\r\n        }\r\n        this.personalDataError = false;\r\n        let savePersonal: PersonalData = {\r\n            name: this.name?.value,\r\n            phone: this.phone?.value,\r\n            orderId: this.orderId\r\n        };\r\n        this.ordersService.savePersonalData(savePersonal).pipe( catchError(err => of(this.personalDataError = true)  ))\r\n        .subscribe((result) => {\r\n            if (!this.personalDataError) {\r\n                this.incrementUploadProgress();\r\n                this.uploadingParts = \"\";\r\n                this.persnoalDataLoaded = true;\r\n                if (!this.snilsLoaded && this.sendDataLoaded) {\r\n                    this.uploadingParts += \"Снилс\";\r\n                }\r\n                if (!this.sendDataLoaded && this.snilsLoaded) {\r\n                    this.uploadingParts += \"Данные об отправке\";\r\n                }\r\n                if (!this.sendDataLoaded && !this.snilsLoaded) {\r\n                    this.uploadingParts += \"Снилс, Данные об отправке\";\r\n                }\r\n                if (this.snilsLoaded && this.sendDataLoaded) {\r\n                    if (this.stepper) {\r\n                        this.stepper.next();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    reloadSendData() {\r\n        if (!this.orderId) {\r\n            return;\r\n        }\r\n        this.sendDataError = false;\r\n        let saveSendData: SendDetils = {\r\n            receiverPhone: this.receieverPhone?.value,\r\n            FIO: this.fio?.value,\r\n            sendMethod: this.selectedSendOption?.value,\r\n            receiverOrderCity: +this.selectedCity,\r\n            index: this.index?.value,\r\n            address: this.address?.value,\r\n            orderId: this.orderId\r\n        };\r\n        this.ordersService.saveSendData(saveSendData)\r\n        .pipe( catchError(err => of(this.sendDataError = true)  ))\r\n        .subscribe((result) => {\r\n            if (!this.sendDataError) {\r\n                this.incrementUploadProgress();\r\n                this.uploadingParts = \"\";\r\n                this.sendDataLoaded = true;\r\n                if (!this.persnoalDataLoaded && this.snilsLoaded) {\r\n                    this.uploadingParts += \"Личные данные\";\r\n                }\r\n                if (this.persnoalDataLoaded && !this.snilsLoaded) {\r\n                    this.uploadingParts += \"Снилс\";\r\n                }\r\n                if (!this.snilsLoaded && !this.persnoalDataLoaded) {\r\n                    this.uploadingParts += \"Личные данные, снилс\";\r\n                }\r\n                if (this.snilsLoaded && this.persnoalDataLoaded) {\r\n                    if (this.stepper) {\r\n                        this.stepper.next();\r\n                    }\r\n                }\r\n            }\r\n        }); \r\n    }\r\n\r\n  }","<div style=\"padding: 50px;\">\r\n <form [formGroup]=\"regForm\">\r\n    <nb-card>\r\n     <nb-card-body>\r\n        <nb-stepper #stepper disableStepNavigation=\"true\" orientation=\"horizontal\">\r\n            <nb-step label=\"Личные данные\">\r\n            <ng-template #labelOne>Личные данные</ng-template>\r\n            <h4>Заполнение личных данных #1</h4>\r\n            <div class=\"input-form\">\r\n                <label for=\"name\">Имя</label>\r\n                <input [status]=\"name?.dirty ? (name?.invalid ? 'danger' : 'success') : ''\" \r\n                    formControlName=\"name\" type=\"text\" nbInput>\r\n                <label for=\"phone\">Телефон</label>\r\n                <nb-form-field>\r\n                    <span style=\"margin-top: -1px;\" nbPrefix>+7</span>\r\n                    <input [status]=\"phone?.dirty ? (phone?.invalid ? 'danger' : 'success') : ''\" \r\n                        formControlName=\"phone\" \r\n                        type=\"text\" nbInput>\r\n                </nb-form-field>\r\n                <nb-checkbox (checkedChange)=\"personalDataAllowUse = !personalDataAllowUse\">Согласие на обработку данных</nb-checkbox>\r\n                <div style=\"display: flex; flex-direction: row;\">\r\n                    <button [disabled]=\"( (name && name.invalid) || (phone && phone.invalid) ) || personalDataAllowUse==false \" (click)=\"loadProducts()\" style=\"margin-right: 10px;\" nbButton nbStepperNext>Дальше</button>\r\n                </div>\r\n            </div>\r\n            </nb-step>\r\n            <nb-step label=\"Потверждение покупок\">\r\n            <ng-template #labelTwo>Потверждение покупок</ng-template>\r\n            <h4>Потверждение покупок #2</h4>\r\n            <div *ngFor=\"let product of products\">\r\n                <nb-card>\r\n                  <nb-card-header>\r\n                      <div class=\"card-header\">\r\n                        <div style=\"display: flex; flex-direction: row; justify-content: space-between;\">\r\n                            <h3>\r\n                                {{product.name}}\r\n                            </h3>\r\n                            <i (click)=\"deleteProduct(product.id)\" class=\"pi pi-times\"></i>\r\n                        </div>\r\n                          <br>\r\n                          <a>Стоимость: {{product.price}}</a>\r\n                      </div>\r\n                  </nb-card-header>\r\n                  <nb-card-body>\r\n                      <div class=\"card-body\">\r\n                        <a *ngFor=\"let prop of product.properties | keyvalue\">\r\n                          <br>\r\n                          {{getFormattedProperty(prop)}}\r\n                        </a>\r\n                      </div>\r\n                  </nb-card-body>\r\n                  <nb-card-footer>\r\n                  </nb-card-footer>\r\n                </nb-card>\r\n            </div>\r\n            <button nbButton style=\"margin-right: 10px;\" nbStepperPrevious>Вернуться</button>\r\n            <button nbButton [disabled]=\"products.length == 0\" nbStepperNext>Дальше</button>\r\n            </nb-step>\r\n            <nb-step label=\"Снилс\">\r\n                <h4>Снилс #3</h4>\r\n                <div class=\"input-form\">\r\n                    <label for=\"name\">Номер Снилса</label>\r\n                    <input [status]=\"snils?.dirty ? (snils?.invalid ? 'danger' : 'success') : ''\" \r\n                        formControlName=\"snils\" type=\"text\" nbInput>\r\n                    <label for=\"snilsPhoto\">Фото снилса</label>\r\n                    <input type=\"file\" formControlName=\"snilsPhoto\" (change)=\"inImageUpload($event)\">\r\n                    <img width=\"200\" height=\"150\" #snilsPreview src=\"#\" alt=\"снилс\" />\r\n                    <div style=\"display: flex; flex-direction: row;\">\r\n                        <button nbButton style=\"margin-right: 10px;\" nbStepperPrevious>Вернуться</button>\r\n                        <button [disabled]=\"(snils && snils.invalid || snilsPhoto && snilsPhoto.invalid ) || !uploadSnils\" style=\"margin-right: 10px;\" nbButton nbStepperNext>Дальше</button>\r\n                    </div>\r\n                </div>\r\n            </nb-step>\r\n            <nb-step label=\"Доставка\">\r\n                <h4>Выбор способа доставки #4</h4>\r\n                <nb-card>\r\n                    <nb-card-header>Доставка {{ selectedSendOption?.value ==  undefined ? \"\" : getSelectedSendOptionLabel()}}</nb-card-header>\r\n                    <nb-card-body>\r\n                      <nb-radio-group formControlName=\"selectedSendOption\">\r\n                        <nb-radio\r\n                          *ngFor=\"let option of options\"\r\n                          [value]=\"option.value\">\r\n                          {{ option.label }}\r\n                        </nb-radio>\r\n                      </nb-radio-group>\r\n                      <nb-select *ngIf=\"isSelectedSelfReciver()\" placeholder=\"Выберите город\" \r\n                            [(selected)]=\"selectedCity\">\r\n                        <nb-option value=\"0\">Москва</nb-option>\r\n                        <nb-option value=\"1\">Воронеж</nb-option>\r\n                      </nb-select>\r\n                      <div *ngIf=\"isSelectedPostOffice()\" class=\"input-form\">\r\n                            <label for=\"fio\">ФИО</label>\r\n                            <input [status]=\"fio?.dirty ? (fio?.invalid ? 'danger' : 'success') : ''\" \r\n                                formControlName=\"fio\" type=\"text\" nbInput>\r\n                            <label for=\"receieverPhone\">Телефон получателя</label>\r\n                            <nb-form-field>\r\n                                <span style=\"margin-top: -1px;\" nbPrefix>+7</span>\r\n                                <input [status]=\"receieverPhone?.dirty ? (receieverPhone?.invalid ? 'danger' : 'success') : ''\" \r\n                                    formControlName=\"receieverPhone\" \r\n                                    type=\"text\" nbInput>\r\n                            </nb-form-field>\r\n                            <label for=\"index\">Индекс</label>\r\n                            <input [status]=\"index?.dirty ? (index?.invalid ? 'danger' : 'success') : ''\" \r\n                                formControlName=\"index\" type=\"text\" nbInput>\r\n                            <label for=\"address\">Адрес</label>\r\n                            <input [status]=\"address?.dirty ? (address?.invalid ? 'danger' : 'success') : ''\" \r\n                                    formControlName=\"address\" type=\"text\" nbInput>\r\n                        </div>\r\n                    </nb-card-body>\r\n                  </nb-card>\r\n                  <div style=\"display: flex; flex-direction: row;\">\r\n                    <button nbButton style=\"margin-right: 10px;\" nbStepperPrevious>Вернуться</button>\r\n                    <button [disabled]=\"isDisabledSenderSubmitStep()\" style=\"margin-right: 10px;\" nbButton nbStepperNext>Дальше</button>\r\n                  </div>\r\n            </nb-step>\r\n            <nb-step label=\"Отправка\">\r\n                <h4>Данные для отправки #5</h4>\r\n                <div class=\"input-form\">\r\n                    <p>Имя: {{name?.value}}</p>\r\n                    <p>Телефон: {{phone?.value}} </p>\r\n                    <p>Продукты: </p>\r\n                    <div *ngFor=\"let product of products\">\r\n                        <p>Id: {{product.id}}, Имя продукта: {{product.name}}, Цена: {{product.price}}, \r\n                            <a *ngFor=\"let prop of product.properties | keyvalue\">\r\n                            {{getFormattedProperty(prop)}}\r\n                            </a> \r\n                        </p>\r\n                    </div>\r\n                    <p>\r\n                        Номер снилса: {{ snils?.value }}\r\n                    </p>\r\n                    <p>\r\n                        Фото снилса: \r\n                    </p>\r\n                    <img width=\"200\" height=\"150\" src=\"{{uploadedSnilsUrl}}\" alt=\"снилс\" />\r\n                    <p>\r\n                        Способ доставки: {{ getSelectedSendOptionLabel() }}\r\n                    </p>\r\n                    <div *ngIf=\"isSelectedSelfReciver()\">\r\n                        <p>\r\n                            Город доставки: {{ getSelectedCity()  }}\r\n                        </p>\r\n                    </div>\r\n                    <div *ngIf=\"isSelectedPostOffice()\">\r\n                        <p>\r\n                            ФИО: {{ fio?.value }}\r\n                        </p>\r\n                        <p>\r\n                            Телефон получателя: {{ receieverPhone?.value }}\r\n                        </p>\r\n                        <p>\r\n                            Индекс: {{ index?.value }}\r\n                        </p>\r\n                        <p>\r\n                            Адрес: {{ address?.value }}\r\n                        </p>\r\n                    </div>\r\n                    <p>Загрузка: {{uploadingParts}}</p>\r\n                    <p *ngIf=\"snilsError\" style=\"color:red\">Снилс не был загружен, <a (click)=\"reloadSnils()\">Перезагрузить</a></p>\r\n                    <p *ngIf=\"personalDataError\" style=\"color:red\">Личные данные не были загружены, <button nbButton (click)=\"reloadPersonalData()\">Перезагрузить</button></p>\r\n                    <p *ngIf=\"sendDataError\" style=\"color:red\">Данные об отправке не были загружены, <button nbButton (click)=\"reloadSendData()\">Перезагрузить</button></p>\r\n                    <nb-progress-bar status=\"primary\" [displayValue]=\"true\" [value]=\"orderUploadProgress\"></nb-progress-bar>\r\n                    <div style=\"display: flex; flex-direction: row;\">\r\n                        <button nbButton style=\"margin-right: 10px;\" nbStepperPrevious>Вернуться</button>\r\n                        <button [disabled]=\"sendDataError || personalDataError || snilsError\" (click)=\"sendOrder()\" style=\"margin-right: 10px;\" nbButton>Отправить заказ</button>\r\n                    </div>\r\n                </div>\r\n            </nb-step>\r\n            <nb-step label=\"Результат\">\r\n                <h4>Результат</h4>\r\n                <div class=\"input-form\">\r\n                    <label>Номер заказа</label>\r\n                    <label>{{orderId}}</label>\r\n                </div>\r\n            </nb-step>\r\n        </nb-stepper>\r\n        </nb-card-body>\r\n    </nb-card>\r\n  </form>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}